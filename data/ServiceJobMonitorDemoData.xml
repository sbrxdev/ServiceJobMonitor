<?xml version="1.0" encoding="UTF-8"?>

<entity-facade-xml type="demo">
    <!--    Email template for notifications    -->
    <emailTemplates
            subject="Monitor ${bodyParameters.message.monitorId} out of bounds. value [${bodyParameters.message.value}]"
            bodyScreenLocation="component://ServiceJobMonitor/screen/email/Notification.xml"
            sendPartial="Y"
            emailServerId="SYSTEM"
            fromName="Moqui notification"
            emailTemplateId="ALERT_NOTIFICATION"
            emailTypeEnumId="EMT_NOTIFICATION"
            fromAddress="noreply@moqui.org"
    />

    <!--  Temperature Example   -->
    <moqui.service.job.ServiceJob jobId="poll_temperature" jobName="poll_temperature"
                                  description="get temperature salt lake city"
                                  serviceName="tailorsoft.demo.TemperatureServices.get#Temperature"
                                  cronExpression="* 0/5 * ? * * *" paused="N"
                                  expireLockTime="3"
    >
        <parameters parameterName="appId" parameterValue="33860c248f66cca0a31fe50b9ad5c489"/>
        <parameters parameterName="city" parameterValue="Salt Lake City"/>
    </moqui.service.job.ServiceJob>

    <tailorsoft.servicejobmonitor.Monitor
            monitorId="poll_temperature"
            jobName="poll_temperature"
            title="Temperature"
            valuePath="value.temp"
            indexName="temperature"
            algorithmEnumId="ALGO_BOUNDS"
            statusId="MonitorActive"
    />

    <tailorsoft.servicejobmonitor.MonitorBounds
            monitorId="poll_temperature"
            lower="0"
            upper="10"
            count="3"
    />

    <moqui.security.user.NotificationTopic
            receiveNotifications="Y"
            description="monitor topic"
            typeString="danger"
            topic="poll_temperature"
            showAlert="Y"
            persistOnSend="Y"
            titleTemplate="Monitor ${monitorId} out of bounds, value: ${value}"
            emailTemplateId="ALERT_NOTIFICATION"
    />


    <!-- single point service monitor    -->
    <tailorsoft.servicejobmonitor.Monitor
            monitorId="single_point"
            title="Single Point monitor"
            valuePath="value"
            indexName="single"
            algorithmEnumId="ALGO_BOUNDS"
            statusId="MonitorActive"
    />

    <tailorsoft.servicejobmonitor.MonitorBounds
            monitorId="single_point"
            lower="0"
            upper="10"
            count="3"
    />

    <moqui.security.user.NotificationTopic
            receiveNotifications="Y"
            description="single point topic"
            typeString="danger"
            topic="single_point"
            showAlert="Y"
            persistOnSend="Y"
            titleTemplate="Monitor ${monitorId} out of bounds, value: ${value}"
            emailTemplateId="ALERT_NOTIFICATION"
    />
</entity-facade-xml>