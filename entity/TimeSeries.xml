<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-2.1.xsd">

    <!-- ========================================================= -->
    <!-- moqui.basic -->
    <!-- moqui.basic.email -->
    <!-- moqui.basic.print -->
    <!-- ========================================================= -->

    <!-- ========== DataSource ========== -->
    <entity entity-name="Monitor" package="tailorsoft.timeseries" use="nontransactional" cache="true">
        <field name="monitorId" type="id" is-pk="true"/>
        <field name="jobName" type="text-short"/>
        <field name="title" type="text-short"/>
        <field name="description" type="text-long"/>
        <field name="valuePath" type="text-medium"/>
        <field name="indexName" type="text-medium"/>
        <field name="statusId" type="id"/>
        <relationship type="one" title="MonitorStatus" related="moqui.basic.StatusItem" short-alias="status"/>
        <seed-data>
            <moqui.basic.StatusType description="Monitor status" parentTypeId="" statusTypeId="MonitorStatus"/>
            <moqui.basic.StatusItem description="Monitor Active" sequenceNum="1" statusId="MonitorActive"
                                    statusTypeId="MonitorStatus"/>
            <moqui.basic.StatusItem description="Monitor Paused" sequenceNum="2" statusId="MonitorPaused"
                                    statusTypeId="MonitorStatus"/>
            <moqui.basic.StatusItem description="Monitor Deleted" sequenceNum="3" statusId="MonitorDeleted"
                                    statusTypeId="MonitorStatus"/>
            <!-- flow transition            -->
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="MonitorActive" toStatusId="MonitorDeleted"
                                              transitionName="deleted"/>

            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="MonitorDeleted" toStatusId="MonitorActive"
                                              transitionName="activated"/>
        </seed-data>
        <field name="algorithmEnumId" type="id"/>
        <seed-data>
            <!-- =========================== Data Source Type Data ==================== -->
            <moqui.basic.EnumerationType description="algorithm Type" enumTypeId="AlgorithmType"/>
            <moqui.basic.Enumeration description="Simple Bounds Algorithm" enumId="ALGO_BOUNDS"
                                     enumTypeId="AlgorithmType"/>
            <moqui.basic.Enumeration description="Standard Deviatioin Algorithm" enumId="ALGO_SDT"
                                     enumTypeId="AlgorithmType"/>
        </seed-data>
        <relationship type="one" related="moqui.service.job.ServiceJob"/>
    </entity>

    <entity entity-name="MonitorBounds" package="tailorsoft.timeseries" use="nontransactional" cache="true">
        <field name="monitorId" type="id" is-pk="true"/>
        <field name="lower" type="number-float"/>
        <field name="upper" type="number-float"/>
        <field name="count" type="number-integer"/>
        <relationship type="one" related="tailorsoft.timeseries.Monitor"/>
    </entity>


    <entity entity-name="MonitorAlert" package="tailorsoft.timeseries" use="nontransactional">
        <field name="id" type="id" is-pk="true"/>
        <field name="monitorId" type="id"/>
        <field name="jobName" type="id"/>
        <field name="jobRunId" type="id"/>
        <field name="fromDate" type="date-time"/>
        <field name="thruDate" type="date-time"/>
        <field name="value" type="number-float"/>
        <field name="notification" type="text-medium"/>
        <field name="issueUrl" type="text-medium"/>
        <field name="statusId" type="id"/>
        <relationship type="one" title="AlertStatus" related="moqui.basic.StatusItem" short-alias="status"/>
        <seed-data>
            <moqui.basic.StatusType description="Alert status" parentTypeId="" statusTypeId="AlertStatus"/>
            <moqui.basic.StatusItem description="alert open" sequenceNum="1" statusId="TsOpen"
                                    statusTypeId="AlertStatus"/>
            <moqui.basic.StatusItem description="alert closed" sequenceNum="2" statusId="TsClosed"
                                    statusTypeId="AlertStatus"/>

            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="TsOpen" toStatusId="TsClosed"
                                              transitionName="solved"/>
        </seed-data>
        <relationship type="many" related="tailorsoft.timeseries.Monitor"/>
    </entity>

</entities>